"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=Duck;function Duck(a,b,c){var d={current:c},e={},f={},g=[],h=function(c,d){var h=f[d.type],i=null==h||0===h.reducers.length?c:1===h.reducers.length?h.reducers[0](c,d,e):h.reducers.reduce(function(a,b){var c=b(a,d,e);return null==c?a:c},c);return g.length?g.reduce(function(c,f){if(null==f[0]&&0===d.type.indexOf("".concat(b||"","/").concat(a||"","/"))||"function"==typeof f[0]&&f[0](d,e)){var g=f[1](c,d,e);return null==g?c:g}return c},i):i};return Object.defineProperty(h,"duckFace",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(h,"duckName",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(h,"poolName",{value:b,writable:!1,enumerable:!0}),Object.defineProperty(h,"duckContext",{value:d.current,writable:!1,configurable:!0,enumerable:!0}),Object.defineProperty(e,"reduce",{value:h,writable:!1,enumerable:!0}),Object.defineProperty(e,"duckName",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(e,"poolName",{value:b,writable:!1,enumerable:!0}),Object.defineProperty(e,"duckContext",{value:d.current,writable:!1,configurable:!0,enumerable:!0}),addActionTypes(h,e,a,b),addActionConstructors(h,e),addSelectors(h,e),addReducers(h,f,g),addCloning(h,f,g),addContextUpdate(h,e,d),h}function addActionTypes(a,b,c,d){function e(a){var b="".concat(d||"","/").concat(c||"","/").concat(a);return"@@"===a.substring(0,2)?b:g[a]||Object.defineProperty(g,a,{value:b,writable:!1,enumerable:!0})[a]}function f(){return Object.keys(g)}var g={};Object.defineProperty(a,"actionTypes",{value:g,writable:!1,enumerable:!0}),Object.defineProperty(a,"mapActionType",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(a,"listActionTypes",{value:f,writable:!1,enumerable:!0}),Object.defineProperty(b,"actionTypes",{value:g,writable:!1,enumerable:!0}),Object.defineProperty(b,"mapActionType",{value:e,writable:!1,enumerable:!0}),Object.defineProperty(b,"listActionTypes",{value:f,writable:!1,enumerable:!0})}function addActionConstructors(a,b){function c(d){function e(a){var c=a instanceof Error,d={type:i,payload:!c&&g?g(a,b):a,error:c};return h?h(d,b):d}var f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:d,g=2<arguments.length?arguments[2]:void 0,h=3<arguments.length?arguments[3]:void 0;if("string"!=typeof f||!f)throw new Error("@duckness/duck.action: - actionType must be a non empty String");var i=a.mapActionType(f);return Object.defineProperty(e,"actionType",{value:i,writable:!1,enumerable:!0}),Object.defineProperty(e,"duckActionType",{value:f,writable:!1,enumerable:!0}),Object.defineProperty(e,"payloadBuilder",{value:g,writable:!1,enumerable:!0}),Object.defineProperty(e,"actionTransformer",{value:h,writable:!1,enumerable:!0}),d&&"string"==typeof d&&(Object.defineProperty(e,"actionName",{value:d,writable:!1,enumerable:!0}),Object.defineProperty(c,d,{value:e,writable:!1,enumerable:!0})),e}Object.defineProperty(a,"action",{value:c,writable:!1,enumerable:!0}),Object.defineProperty(b,"action",{value:c,writable:!1,enumerable:!0})}function addSelectors(a,b){var c={};Object.defineProperty(a,"selector",{value:function(a,d){if("function"==typeof d){var e=function(){for(var a=arguments.length,c=Array(a),e=0;e<a;e++)c[e]=arguments[e];return d.apply(this,[].concat(c,[b]))};return Object.defineProperty(e,"originalSelector",{value:d,writable:!1,enumerable:!0}),a&&(Object.defineProperty(e,"selectorName",{value:a,writable:!1,enumerable:!0}),Object.defineProperty(c,a,{value:e,writable:!1,enumerable:!0})),e}throw new Error("@duckness/duck.selector: - selector must be a Function")},writable:!1,enumerable:!0}),Object.defineProperty(a,"select",{value:c,writable:!1,enumerable:!0}),Object.defineProperty(b,"select",{value:c,writable:!1,enumerable:!0})}function addReducers(a,b,c){Object.defineProperty(a,"reducer",{value:function(d,e){if("function"==typeof e){if("string"==typeof d){var f=a.mapActionType(d);b[f]||(b[f]={actionType:d,reducers:[]}),b[f].reducers.push(e)}else if("function"==typeof d)c.push([d,e]);else if(null==d)c.push([null,e]);else throw new Error("@duckness/duck.reducer: actionType must be a String, null or Function");return e}throw new Error("@duckness/duck.reducer: reducer must be a Function")},writable:!1,enumerable:!0})}function addCloning(a,b,c){Object.defineProperty(a,"clone",{value:function(d,e,f){var g=Duck(d,e,f);return a.listActionTypes().forEach(function(a){g.mapActionType(a)}),Object.keys(a.action).forEach(function(b){var c=a.action[b];"function"==typeof c&&c.actionType&&g.action(b,c.duckActionType)}),Object.keys(a.select).forEach(function(b){a.select[b].originalSelector&&g.selector(b,a.select[b].originalSelector)}),Object.keys(b).forEach(function(a){var c=b[a];if(c){var d=c.actionType,e=c.reducers;e.forEach(function(a){g.reducer(d,a)})}}),c.forEach(function(a){g.reducer(a[0],a[1])}),g},writable:!1,enumerable:!0})}function addContextUpdate(a,b,c){Object.defineProperty(a,"updateContext",{value:function(d){c.current=d,Object.defineProperty(a,"duckContext",{value:c.current,writable:!1,configurable:!0,enumerable:!0}),Object.defineProperty(b,"duckContext",{value:c.current,writable:!1,configurable:!0,enumerable:!0})},writable:!1,enumerable:!0})}
//# sourceMappingURL=Duck.js.map