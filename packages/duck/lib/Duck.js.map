{"version":3,"sources":["../src/Duck.js"],"names":["Duck","duckName","poolName","duckContext","refDuckContext","current","duckFace","typedReducers","customReducers","duck","state","action","actionReducers","type","reducedState","length","reducers","reduce","reducer","customReducer","Object","defineProperty","value","writable","enumerable","configurable","addActionTypes","addActionConstructors","addSelectors","addReducers","addCloning","addContextUpdate","actionTypes","actionType","keys","actionConstructor","actionName","payloadBuilder","actionTransformer","constructAction","payload","isError","Error","fullActionType","error","mapActionType","selectors","selectorName","selector","selectorWithContext","args","apply","push","clonedDuck","listActionTypes","forEach","select","originalSelector","reducerActionType","newDuckContext"],"mappings":"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","sourcesContent":["export default function Duck(duckName, poolName, duckContext) {\n  // updatable duck context\n  const refDuckContext = {\n    current: duckContext\n  }\n\n  // DUCK FACE is interface to duck received by selectors and reducers\n  const duckFace = {\n    /*\n    actionTypes\n    select\n    action\n    reduce\n    duckName\n    poolName\n    duckContext\n    */\n  }\n\n  // Duck is root reducer\n  const typedReducers = {}\n  const customReducers = []\n  const duck = function duckRootReducer(state, action) {\n    var actionReducers = typedReducers[action.type]\n    var reducedState =\n      null == actionReducers || 0 === actionReducers.length\n        ? state\n        : 1 === actionReducers.length\n        ? actionReducers.reducers[0](state, action, duckFace)\n        : actionReducers.reducers.reduce((state, reducer) => {\n            const reducedState = reducer(state, action, duckFace)\n            return null == reducedState ? state : reducedState\n          }, state)\n\n    return customReducers.length\n      ? customReducers.reduce((state, customReducer) => {\n          if (null == customReducer[0] || customReducer[0](action, duckFace)) {\n            const reducedState = customReducer[1](state, action, duckFace)\n            return null == reducedState ? state : reducedState\n          } else {\n            return state\n          }\n        }, reducedState)\n      : reducedState\n  }\n\n  // Duck attributes\n  Object.defineProperty(duck, 'duckFace', { value: duckFace, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'duckName', { value: duckName, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'poolName', { value: poolName, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'duckContext', {\n    value: refDuckContext.current,\n    writable: false,\n    configurable: true,\n    enumerable: true\n  })\n\n  // duckFace attributes\n  Object.defineProperty(duckFace, 'reduce', { value: duck, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'duckName', { value: duckName, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'poolName', { value: poolName, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'duckContext', {\n    value: refDuckContext.current,\n    writable: false,\n    configurable: true,\n    enumerable: true\n  })\n\n  // add functionality\n  addActionTypes(duck, duckFace, duckName, poolName)\n  addActionConstructors(duck, duckFace)\n  addSelectors(duck, duckFace)\n  addReducers(duck, typedReducers, customReducers)\n  addCloning(duck, typedReducers, customReducers)\n  addContextUpdate(duck, duckFace, refDuckContext)\n\n  return duck\n}\n\n// ---- ACTION TYPES -------------------------------------------------------------------------\n\nfunction addActionTypes(duck, duckFace, duckName, poolName) {\n  const actionTypes = {}\n  function mapActionType(actionType) {\n    return (\n      actionTypes[actionType] ||\n      Object.defineProperty(actionTypes, actionType, {\n        value: (poolName || '') + '/' + (duckName || '') + '/' + actionType,\n        writable: false,\n        enumerable: true\n      })[actionType]\n    )\n  }\n  function listActionTypes() {\n    return Object.keys(actionTypes)\n  }\n\n  Object.defineProperty(duck, 'actionTypes', { value: actionTypes, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'mapActionType', { value: mapActionType, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'listActionTypes', { value: listActionTypes, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'actionTypes', { value: actionTypes, writable: false, enumerable: true })\n}\n\n// ---- ACTION CONSTRUCTORS -------------------------------------------------------------------------\n\nfunction addActionConstructors(duck, duckFace) {\n  function actionConstructor(actionName, actionType, payloadBuilder, actionTransformer) {\n    const fullActionType = duck.mapActionType(actionType)\n    function constructAction(payload) {\n      const isError = payload instanceof Error\n      const action = {\n        type: fullActionType,\n        payload: !isError && payloadBuilder ? payloadBuilder(payload, duckFace) : payload,\n        error: isError\n      }\n      return actionTransformer ? actionTransformer(action, duckFace) : action\n    }\n    Object.defineProperty(constructAction, 'actionType', { value: actionType, writable: false, enumerable: true })\n    Object.defineProperty(constructAction, 'payloadBuilder', {\n      value: payloadBuilder,\n      writable: false,\n      enumerable: true\n    })\n    Object.defineProperty(constructAction, 'actionTransformer', {\n      value: actionTransformer,\n      writable: false,\n      enumerable: true\n    })\n\n    if (actionName) {\n      Object.defineProperty(constructAction, 'actionName', { value: actionName, writable: false, enumerable: true })\n      Object.defineProperty(actionConstructor, actionName, {\n        value: constructAction,\n        writable: false,\n        enumerable: true\n      })\n    }\n    return constructAction\n  }\n\n  Object.defineProperty(duck, 'action', { value: actionConstructor, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'action', { value: actionConstructor, writable: false, enumerable: true })\n}\n\n// ---- SELECTORS -------------------------------------------------------------------------\n\nfunction addSelectors(duck, duckFace) {\n  const selectors = {}\n  function addSelector(selectorName, selector) {\n    if (selectorName && 'function' === typeof selector) {\n      const selectorWithContext = function (...args) {\n        return selector.apply(this, [...args, duckFace])\n      }\n      Object.defineProperty(selectorWithContext, 'selectorName', {\n        value: selectorName,\n        writable: false,\n        enumerable: true\n      })\n      Object.defineProperty(selectorWithContext, 'originalSelector', {\n        value: selector,\n        writable: false,\n        enumerable: true\n      })\n      Object.defineProperty(selectors, selectorName, {\n        value: selectorWithContext,\n        writable: false,\n        enumerable: true\n      })\n    }\n  }\n  Object.defineProperty(duck, 'selector', { value: addSelector, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'select', { value: selectors, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'select', { value: selectors, writable: false, enumerable: true })\n}\n\n// ---- REDUCERS -------------------------------------------------------------------------\n\nfunction addReducers(duck, typedReducers, customReducers) {\n  function addReducer(actionType, reducer) {\n    if ('function' === typeof reducer) {\n      if ('string' === typeof actionType) {\n        const fullActionType = duck.mapActionType(actionType)\n        if (!typedReducers[fullActionType]) {\n          typedReducers[fullActionType] = {\n            actionType,\n            reducers: []\n          }\n        }\n        typedReducers[fullActionType].reducers.push(reducer)\n      } else if ('function' === typeof actionType) {\n        customReducers.push([actionType, reducer])\n      } else if (null == actionType) {\n        customReducers.push([null, reducer])\n      }\n    }\n  }\n  Object.defineProperty(duck, 'reducer', { value: addReducer, writable: false, enumerable: true })\n}\n\n// ---- CLONING --------------------------------------------------------------------------\n\nfunction addCloning(duck, typedReducers, customReducers) {\n  function cloneDuck(duckName, poolName, duckContext) {\n    const clonedDuck = Duck(duckName, poolName, duckContext)\n    // clone action types\n    duck.listActionTypes().forEach(function (actionType) {\n      clonedDuck.mapActionType(actionType)\n    })\n\n    // clone action constructors\n    Object.keys(duck.action).forEach(actionName => {\n      const actionConstructor = duck.action[actionName]\n      if ('function' === typeof actionConstructor && actionConstructor.actionType) {\n        clonedDuck.action(actionName, actionConstructor.actionType)\n      }\n    })\n\n    // clone selectors\n    Object.keys(duck.select).forEach(selectorName => {\n      if (duck.select[selectorName].originalSelector) {\n        clonedDuck.selector(selectorName, duck.select[selectorName].originalSelector)\n      }\n    })\n\n    // clone reducers\n    Object.keys(typedReducers).forEach(reducerActionType => {\n      const actionReducers = typedReducers[reducerActionType]\n      if (actionReducers) {\n        const { actionType, reducers } = actionReducers\n        reducers.forEach(reducer => {\n          clonedDuck.reducer(actionType, reducer)\n        })\n      }\n    })\n    customReducers.forEach(customReducer => {\n      clonedDuck.reducer(customReducer[0], customReducer[1])\n    })\n\n    return clonedDuck\n  }\n  Object.defineProperty(duck, 'clone', { value: cloneDuck, writable: false, enumerable: true })\n}\n\n// ---- CONTEXT UPDATE -------------------------------------------------------------------\n\nfunction addContextUpdate(duck, duckFace, refDuckContext) {\n  function updateContext(newDuckContext) {\n    refDuckContext.current = newDuckContext\n    Object.defineProperty(duck, 'duckContext', {\n      value: refDuckContext.current,\n      writable: false,\n      configurable: true,\n      enumerable: true\n    })\n    Object.defineProperty(duckFace, 'duckContext', {\n      value: refDuckContext.current,\n      writable: false,\n      configurable: true,\n      enumerable: true\n    })\n  }\n  Object.defineProperty(duck, 'updateContext', { value: updateContext, writable: false, enumerable: true })\n}\n"],"file":"Duck.js"}