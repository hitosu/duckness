{"version":3,"sources":["../src/Duck.js"],"names":["Duck","duckName","poolName","duckContext","refDuckContext","current","duckFace","typedReducers","customReducers","duck","state","action","actionReducers","type","reducedState","length","reducers","reduce","reducer","customReducer","indexOf","Object","defineProperty","value","writable","enumerable","configurable","addActionTypes","addActionConstructors","addSelectors","addReducers","addCloning","addContextUpdate","actionTypes","actionType","fullActionType","substring","keys","actionConstructor","actionName","payloadBuilder","actionTransformer","constructAction","payload","isError","Error","error","mapActionType","selectors","selectorName","selector","selectorWithContext","args","apply","push","clonedDuck","listActionTypes","forEach","select","originalSelector","reducerActionType","newDuckContext"],"mappings":"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","sourcesContent":["export default function Duck(duckName, poolName, duckContext) {\n  // updatable duck context\n  const refDuckContext = {\n    current: duckContext\n  }\n\n  // DUCK FACE is interface to duck received by selectors and reducers\n  const duckFace = {\n    /*\n    actionTypes\n    select\n    action\n    reduce\n    duckName\n    poolName\n    duckContext\n    */\n  }\n\n  // Duck is root reducer\n  const typedReducers = {}\n  const customReducers = []\n  const duck = function duckRootReducer(state, action) {\n    var actionReducers = typedReducers[action.type]\n    var reducedState =\n      null == actionReducers || 0 === actionReducers.length\n        ? state\n        : 1 === actionReducers.length\n        ? actionReducers.reducers[0](state, action, duckFace)\n        : actionReducers.reducers.reduce((state, reducer) => {\n            const reducedState = reducer(state, action, duckFace)\n            return null == reducedState ? state : reducedState\n          }, state)\n\n    return customReducers.length\n      ? customReducers.reduce((state, customReducer) => {\n          if (\n            (null == customReducer[0] && 0 === action.type.indexOf(`${poolName || ''}/${duckName || ''}/`)) ||\n            ('function' === typeof customReducer[0] && customReducer[0](action, duckFace))\n          ) {\n            const reducedState = customReducer[1](state, action, duckFace)\n            return null == reducedState ? state : reducedState\n          } else {\n            return state\n          }\n        }, reducedState)\n      : reducedState\n  }\n\n  // Duck attributes\n  Object.defineProperty(duck, 'duckFace', { value: duckFace, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'duckName', { value: duckName, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'poolName', { value: poolName, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'duckContext', {\n    value: refDuckContext.current,\n    writable: false,\n    configurable: true,\n    enumerable: true\n  })\n\n  // duckFace attributes\n  Object.defineProperty(duckFace, 'reduce', { value: duck, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'duckName', { value: duckName, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'poolName', { value: poolName, writable: false, enumerable: true })\n  Object.defineProperty(duckFace, 'duckContext', {\n    value: refDuckContext.current,\n    writable: false,\n    configurable: true,\n    enumerable: true\n  })\n\n  // add functionality\n  addActionTypes(duck, duckFace, duckName, poolName)\n  addActionConstructors(duck, duckFace)\n  addSelectors(duck, duckFace)\n  addReducers(duck, typedReducers, customReducers)\n  addCloning(duck, typedReducers, customReducers)\n  addContextUpdate(duck, duckFace, refDuckContext)\n\n  return duck\n}\n\n// ---- ACTION TYPES -------------------------------------------------------------------------\n\nfunction addActionTypes(duck, duckFace, duckName, poolName) {\n  const actionTypes = {}\n  function mapActionType(actionType) {\n    const fullActionType = `${poolName || ''}/${duckName || ''}/${actionType}`\n    return '@@' === actionType.substring(0, 2)\n      ? fullActionType\n      : actionTypes[actionType] ||\n          Object.defineProperty(actionTypes, actionType, {\n            value: fullActionType,\n            writable: false,\n            enumerable: true\n          })[actionType]\n  }\n  function listActionTypes() {\n    return Object.keys(actionTypes)\n  }\n\n  Object.defineProperty(duck, 'actionTypes', { value: actionTypes, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'mapActionType', { value: mapActionType, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'listActionTypes', { value: listActionTypes, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'actionTypes', { value: actionTypes, writable: false, enumerable: true })\n}\n\n// ---- ACTION CONSTRUCTORS -------------------------------------------------------------------------\n\nfunction addActionConstructors(duck, duckFace) {\n  function actionConstructor(actionName, actionType, payloadBuilder, actionTransformer) {\n    if ('string' !== typeof actionType || !actionType) {\n      throw new Error('@duckness/duck.action: - actionType must be a non empty String')\n    }\n    const fullActionType = duck.mapActionType(actionType)\n    function constructAction(payload) {\n      const isError = payload instanceof Error\n      const action = {\n        type: fullActionType,\n        payload: !isError && payloadBuilder ? payloadBuilder(payload, duckFace) : payload,\n        error: isError\n      }\n      return actionTransformer ? actionTransformer(action, duckFace) : action\n    }\n    Object.defineProperty(constructAction, 'actionType', { value: actionType, writable: false, enumerable: true })\n    Object.defineProperty(constructAction, 'payloadBuilder', {\n      value: payloadBuilder,\n      writable: false,\n      enumerable: true\n    })\n    Object.defineProperty(constructAction, 'actionTransformer', {\n      value: actionTransformer,\n      writable: false,\n      enumerable: true\n    })\n\n    if (actionName && 'string' === typeof actionName) {\n      Object.defineProperty(constructAction, 'actionName', { value: actionName, writable: false, enumerable: true })\n      Object.defineProperty(actionConstructor, actionName, {\n        value: constructAction,\n        writable: false,\n        enumerable: true\n      })\n    }\n    return constructAction\n  }\n\n  Object.defineProperty(duck, 'action', { value: actionConstructor, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'action', { value: actionConstructor, writable: false, enumerable: true })\n}\n\n// ---- SELECTORS -------------------------------------------------------------------------\n\nfunction addSelectors(duck, duckFace) {\n  const selectors = {}\n  function addSelector(selectorName, selector) {\n    if ('function' === typeof selector) {\n      const selectorWithContext = function (...args) {\n        return selector.apply(this, [...args, duckFace])\n      }\n      Object.defineProperty(selectorWithContext, 'originalSelector', {\n        value: selector,\n        writable: false,\n        enumerable: true\n      })\n      if (selectorName) {\n        Object.defineProperty(selectorWithContext, 'selectorName', {\n          value: selectorName,\n          writable: false,\n          enumerable: true\n        })\n        Object.defineProperty(selectors, selectorName, {\n          value: selectorWithContext,\n          writable: false,\n          enumerable: true\n        })\n      }\n      return selectorWithContext\n    } else {\n      throw new Error('@duckness/duck.selector: - selector must be a Function')\n    }\n  }\n  Object.defineProperty(duck, 'selector', { value: addSelector, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'select', { value: selectors, writable: false, enumerable: true })\n\n  Object.defineProperty(duckFace, 'select', { value: selectors, writable: false, enumerable: true })\n}\n\n// ---- REDUCERS -------------------------------------------------------------------------\n\nfunction addReducers(duck, typedReducers, customReducers) {\n  function addReducer(actionType, reducer) {\n    if ('function' === typeof reducer) {\n      if ('string' === typeof actionType) {\n        const fullActionType = duck.mapActionType(actionType)\n        if (!typedReducers[fullActionType]) {\n          typedReducers[fullActionType] = {\n            actionType,\n            reducers: []\n          }\n        }\n        typedReducers[fullActionType].reducers.push(reducer)\n      } else if ('function' === typeof actionType) {\n        customReducers.push([actionType, reducer])\n      } else if (null == actionType) {\n        customReducers.push([null, reducer])\n      } else {\n        throw new Error('@duckness/duck.reducer: actionType must be a String, null or Function')\n      }\n      return reducer\n    } else {\n      throw new Error('@duckness/duck.reducer: reducer must be a Function')\n    }\n  }\n  Object.defineProperty(duck, 'reducer', { value: addReducer, writable: false, enumerable: true })\n}\n\n// ---- CLONING --------------------------------------------------------------------------\n\nfunction addCloning(duck, typedReducers, customReducers) {\n  function cloneDuck(duckName, poolName, duckContext) {\n    const clonedDuck = Duck(duckName, poolName, duckContext)\n    // clone action types\n    duck.listActionTypes().forEach(function (actionType) {\n      clonedDuck.mapActionType(actionType)\n    })\n\n    // clone action constructors\n    Object.keys(duck.action).forEach(actionName => {\n      const actionConstructor = duck.action[actionName]\n      if ('function' === typeof actionConstructor && actionConstructor.actionType) {\n        clonedDuck.action(actionName, actionConstructor.actionType)\n      }\n    })\n\n    // clone selectors\n    Object.keys(duck.select).forEach(selectorName => {\n      if (duck.select[selectorName].originalSelector) {\n        clonedDuck.selector(selectorName, duck.select[selectorName].originalSelector)\n      }\n    })\n\n    // clone reducers\n    Object.keys(typedReducers).forEach(reducerActionType => {\n      const actionReducers = typedReducers[reducerActionType]\n      if (actionReducers) {\n        const { actionType, reducers } = actionReducers\n        reducers.forEach(reducer => {\n          clonedDuck.reducer(actionType, reducer)\n        })\n      }\n    })\n    customReducers.forEach(customReducer => {\n      clonedDuck.reducer(customReducer[0], customReducer[1])\n    })\n\n    return clonedDuck\n  }\n  Object.defineProperty(duck, 'clone', { value: cloneDuck, writable: false, enumerable: true })\n}\n\n// ---- CONTEXT UPDATE -------------------------------------------------------------------\n\nfunction addContextUpdate(duck, duckFace, refDuckContext) {\n  function updateContext(newDuckContext) {\n    refDuckContext.current = newDuckContext\n    Object.defineProperty(duck, 'duckContext', {\n      value: refDuckContext.current,\n      writable: false,\n      configurable: true,\n      enumerable: true\n    })\n    Object.defineProperty(duckFace, 'duckContext', {\n      value: refDuckContext.current,\n      writable: false,\n      configurable: true,\n      enumerable: true\n    })\n  }\n  Object.defineProperty(duck, 'updateContext', { value: updateContext, writable: false, enumerable: true })\n}\n"],"file":"Duck.js"}