{"version":3,"sources":["../src/PoolEpicStream.js"],"names":["PoolEpicStream","buildRootEpic","epicMiddleware","Object","defineProperty","value","writable","enumerable","refDucks","refErrorReporter","rootEpic","current","combineEpics","reduce","epics","duck","setErrorReporter","push","run"],"mappings":"aAAA,iD,qjCAEe,QAASA,CAAAA,cAAT,EAAgD,8DAAJ,EAAI,CAAtBC,CAAsB,GAAtBA,aAAsB,CACvDC,CAAc,CAAG,2CADsC,CA0BvDF,CAAc,CAAG,EA1BsC,CAgC7D,MAJAG,CAAAA,MAAM,CAACC,cAAP,CAAsBJ,CAAtB,CAAsC,aAAtC,CAAqD,CAAEK,KAAK,CAzB5D,UAAuB,CACrB,MAAO,CAACH,CAAD,CACR,CAuBoD,CAAsBI,QAAQ,GAA9B,CAAuCC,UAAU,GAAjD,CAArD,CAIA,CAHAJ,MAAM,CAACC,cAAP,CAAsBJ,CAAtB,CAAsC,aAAtC,CAAqD,CAAEK,KAAK,CAtB5D,UAAuB,CAEtB,CAoBoD,CAAsBC,QAAQ,GAA9B,CAAuCC,UAAU,GAAjD,CAArD,CAGA,CAFAJ,MAAM,CAACC,cAAP,CAAsBJ,CAAtB,CAAsC,YAAtC,CAAoD,CAAEK,KAAK,CAnB3D,UAAyD,8DAAJ,EAAI,CAAnCG,CAAmC,GAAnCA,QAAmC,CAAzBC,CAAyB,GAAzBA,gBAAyB,CACjDC,CAAQ,CAAGT,CAAa,CAC1BA,CAAa,CAACO,CAAQ,CAACG,OAAV,CAAmB,CAAEH,QAAQ,CAARA,CAAF,CAAYC,gBAAgB,CAAhBA,CAAZ,CAAnB,CADa,CAE1BG,8DACKJ,CAAQ,CAACG,OAAT,CAAiBE,MAAjB,CAAwB,SAACC,CAAD,CAAQC,CAAR,CAAiB,CAK1C,MAJIA,CAAAA,CAAI,CAACL,QAIT,GAHEK,CAAI,CAACC,gBAAL,CAAsBP,CAAgB,CAACE,OAAvC,CAGF,CAFEG,CAAK,CAACG,IAAN,CAAWF,CAAI,CAACL,QAAL,EAAX,CAEF,EAAOI,CACR,CANE,CAMA,EANA,CADL,EAHmD,CAYvDZ,CAAc,CAACgB,GAAf,CAAmBR,CAAnB,CACD,CAMmD,CAAqBJ,QAAQ,GAA7B,CAAsCC,UAAU,GAAhD,CAApD,CAEA,CAAOP,CACR","sourcesContent":["import { createEpicMiddleware, combineEpics } from 'redux-observable'\n\nexport default function PoolEpicStream({ buildRootEpic } = {}) {\n  const epicMiddleware = createEpicMiddleware()\n\n  function middlewares() {\n    return [epicMiddleware]\n  }\n\n  function beforeBuild() {\n    // NOP\n  }\n\n  function afterBuild({ refDucks, refErrorReporter } = {}) {\n    const rootEpic = buildRootEpic\n      ? buildRootEpic(refDucks.current, { refDucks, refErrorReporter })\n      : combineEpics(\n          ...refDucks.current.reduce((epics, duck) => {\n            if (duck.rootEpic) {\n              duck.setErrorReporter(refErrorReporter.current)\n              epics.push(duck.rootEpic())\n            }\n            return epics\n          }, [])\n        )\n    epicMiddleware.run(rootEpic)\n  }\n\n  const PoolEpicStream = {}\n\n  Object.defineProperty(PoolEpicStream, 'middlewares', { value: middlewares, writable: false, enumerable: true })\n  Object.defineProperty(PoolEpicStream, 'beforeBuild', { value: beforeBuild, writable: false, enumerable: true })\n  Object.defineProperty(PoolEpicStream, 'afterBuild', { value: afterBuild, writable: false, enumerable: true })\n\n  return PoolEpicStream\n}\n"],"file":"PoolEpicStream.js"}