{"version":3,"file":"PoolEpicStream.js","names":["PoolEpicStream","buildRootEpic","epicMiddleware","createEpicMiddleware","Object","defineProperty","value","writable","enumerable","refDucks","refErrorReporter","rootEpic","current","combineEpics","reduce","epics","duck","setErrorReporter","push","run"],"sources":["../src/PoolEpicStream.js"],"sourcesContent":["import { createEpicMiddleware, combineEpics } from 'redux-observable'\n\nexport default function PoolEpicStream({ buildRootEpic } = {}) {\n  const epicMiddleware = createEpicMiddleware()\n\n  function middlewares() {\n    return [epicMiddleware]\n  }\n\n  function beforeBuild() {\n    // NOP\n  }\n\n  function afterBuild({ refDucks, refErrorReporter } = {}) {\n    const rootEpic = buildRootEpic\n      ? buildRootEpic(refDucks.current, { refDucks, refErrorReporter })\n      : combineEpics(\n          ...refDucks.current.reduce((epics, duck) => {\n            if (duck.rootEpic) {\n              duck.setErrorReporter(refErrorReporter.current)\n              epics.push(duck.rootEpic())\n            }\n            return epics\n          }, [])\n        )\n    epicMiddleware.run(rootEpic)\n  }\n\n  const PoolEpicStream = {}\n\n  Object.defineProperty(PoolEpicStream, 'middlewares', { value: middlewares, writable: false, enumerable: true })\n  Object.defineProperty(PoolEpicStream, 'beforeBuild', { value: beforeBuild, writable: false, enumerable: true })\n  Object.defineProperty(PoolEpicStream, 'afterBuild', { value: afterBuild, writable: false, enumerable: true })\n\n  return PoolEpicStream\n}\n"],"mappings":"aAAA,iDAAqE,qjCAEtD,QAASA,eAAc,EAAyB,8DAAJ,CAAC,CAAC,CAApBC,CAAa,GAAbA,aAAa,CAC9CC,CAAc,CAAG,GAAAC,qCAAoB,GAAE,CAyBvCH,CAAc,CAAG,CAAC,CAAC,CAMzB,MAJAI,OAAM,CAACC,cAAc,CAACL,CAAc,CAAE,aAAa,CAAE,CAAEM,KAAK,CAzB5D,UAAuB,CACrB,MAAO,CAACJ,CAAc,CACxB,CAuByE,CAAEK,QAAQ,GAAO,CAAEC,UAAU,GAAO,CAAC,CAAC,CAC/GJ,MAAM,CAACC,cAAc,CAACL,CAAc,CAAE,aAAa,CAAE,CAAEM,KAAK,CAtB5D,UAAuB,CAEvB,CAoByE,CAAEC,QAAQ,GAAO,CAAEC,UAAU,GAAO,CAAC,CAAC,CAC/GJ,MAAM,CAACC,cAAc,CAACL,CAAc,CAAE,YAAY,CAAE,CAAEM,KAAK,CAnB3D,UAAyD,8DAAJ,CAAC,CAAC,CAAjCG,CAAQ,GAARA,QAAQ,CAAEC,CAAgB,GAAhBA,gBAAgB,CACxCC,CAAQ,CAAGV,CAAa,CAC1BA,CAAa,CAACQ,CAAQ,CAACG,OAAO,CAAE,CAAEH,QAAQ,CAARA,CAAQ,CAAEC,gBAAgB,CAAhBA,CAAiB,CAAC,CAAC,CAC/DG,6BAAY,iCACPJ,CAAQ,CAACG,OAAO,CAACE,MAAM,CAAC,SAACC,CAAK,CAAEC,CAAI,CAAK,CAK1C,MAJIA,EAAI,CAACL,QAAQ,GACfK,CAAI,CAACC,gBAAgB,CAACP,CAAgB,CAACE,OAAO,CAAC,CAC/CG,CAAK,CAACG,IAAI,CAACF,CAAI,CAACL,QAAQ,EAAE,CAAC,EAEtBI,CACT,CAAC,CAAE,EAAE,CAAC,EACP,CACLb,CAAc,CAACiB,GAAG,CAACR,CAAQ,CAC7B,CAMuE,CAAEJ,QAAQ,GAAO,CAAEC,UAAU,GAAO,CAAC,CAAC,CAEtGR,CACT"}