{"version":3,"sources":["../src/SagaDuck.js"],"names":["SagaDuck","duckName","appName","duckContext","rootSaga","sagas","duck","refErrorReporter","current","console","error","Object","defineProperty","value","saga","push","duckFace","writable","enumerable","reporter"],"mappings":"wQAGe,QAASA,CAAAA,QAAT,CAAkBC,CAAlB,CAA4BC,CAA5B,CAAqCC,CAArC,CAAkD,CA2B/D,QAAUC,CAAAA,CAAV,kFACE,gBAAM,iBAAIC,CAAJ,CAAN,CADF,uCA3B+D,8BA2BrDD,CA3BqD,EACzDE,CAAI,CAAG,kBAAKL,CAAL,CAAeC,CAAf,CAAwBC,CAAxB,CADkD,CAGzDI,CAAgB,CAAG,CACvBC,OAAO,CAAEC,OAAO,CAACC,KADM,CAHsC,CAWzDL,CAAK,CAAG,EAXiD,CAmC/D,MAJAM,CAAAA,MAAM,CAACC,cAAP,CAAsBN,CAAtB,CAA4B,MAA5B,CAAoC,CAAEO,KAAK,CAnB3C,SAAiBC,CAAjB,CAAuB,CACrBT,CAAK,CAACU,IAAN,CACE,2CAAM,4FAGA,yBAAM,kBAAKD,CAAL,CAAWR,CAAI,CAACU,QAAhB,CAAN,CAHA,sEAMI,YAAe,MAAOT,CAAAA,CAAgB,CAACC,OAN3C,EAMoDD,CAAgB,CAACC,OAAjB,MANpD,6EAAN,EADF,CAYD,CAMmC,CAAkBS,QAAQ,GAA1B,CAAmCC,UAAU,GAA7C,CAApC,CAIA,CAHAP,MAAM,CAACC,cAAP,CAAsBN,CAAtB,CAA4B,UAA5B,CAAwC,CAAEO,KAAK,CAAET,CAAT,CAAmBa,QAAQ,GAA3B,CAAoCC,UAAU,GAA9C,CAAxC,CAGA,CAFAP,MAAM,CAACC,cAAP,CAAsBN,CAAtB,CAA4B,eAA5B,CAA6C,CAAEO,KAAK,CA1BpD,SAA0BM,CAA1B,CAAoC,CAClCZ,CAAgB,CAACC,OAAjB,CAA2BW,CAC5B,CAwB4C,CAA2BF,QAAQ,GAAnC,CAA4CC,UAAU,GAAtD,CAA7C,CAEA,CAAOZ,CACR","sourcesContent":["import Duck from '@duckness/duck'\nimport { spawn, call, all } from 'redux-saga/effects'\n\nexport default function SagaDuck(duckName, appName, duckContext) {\n  const duck = Duck(duckName, appName, duckContext)\n\n  const refErrorReporter = {\n    current: console.error\n  }\n\n  function setErrorReporter(reporter) {\n    refErrorReporter.current = reporter\n  }\n\n  const sagas = []\n  function addSaga(saga) {\n    sagas.push(\n      spawn(function* () {\n        while (true) {\n          try {\n            yield call(saga, duck.duckFace)\n            break\n          } catch (error) {\n            if ('function' === typeof refErrorReporter.current) refErrorReporter.current(error)\n          }\n        }\n      })\n    )\n  }\n\n  function* rootSaga() {\n    yield all(sagas)\n  }\n\n  Object.defineProperty(duck, 'saga', { value: addSaga, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'rootSaga', { value: rootSaga, writable: false, enumerable: true })\n  Object.defineProperty(duck, 'errorReporter', { value: setErrorReporter, writable: false, enumerable: true })\n\n  return duck\n}\n"],"file":"SagaDuck.js"}