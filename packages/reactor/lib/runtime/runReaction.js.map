{"version":3,"sources":["../../src/runtime/runReaction.js"],"names":["runReaction","reaction","Reactor","runtime","currentValue","isRunning","iterator","generator","nextStep","next","done","effect","value","type","payload"],"mappings":"smBAIe,QAASA,CAAAA,WAAT,CAAqBC,CAArB,CAA+BC,CAA/B,CAAwCC,CAAxC,CAAiDC,CAAjD,CAA+D,CACvEH,CAAQ,CAACI,SAD8D,GAE1EJ,CAAQ,CAACK,QAAT,CAAoBL,CAAQ,CAACM,SAAT,EAFsD,CAG1EN,CAAQ,CAACI,SAAT,GAH0E,EAK5E,GAAMG,CAAAA,CAAQ,CAAGP,CAAQ,CAACK,QAAT,CAAkBG,IAAlB,CAAuBL,CAAvB,CAAjB,CACA,GAAI,CAACI,CAAQ,CAACE,IAAd,CAAoB,IACHC,CAAAA,CADG,CACQH,CADR,CACVI,KADU,CAElB,GAAI,mBAAoBD,CAApB,GAA8BA,CAAM,CAACE,IAAzC,CACE,OAAQF,CAAM,CAACE,IAAf,EACE,IAAK,MAAL,CAAa,CACX,kBACEF,CADF,CAEE,SAAAG,CAAO,CAAI,CACTd,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBC,CAApB,CAA6BW,CAA7B,CACZ,CAJH,CAKEZ,CALF,CADW,CAQX,KACD,CACD,IAAK,KAAL,CAAY,CACV,iBACES,CADF,CAEE,SAAAG,CAAO,CAAI,CACTd,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBC,CAApB,CAA6BW,CAA7B,CACZ,CAJH,CAKEZ,CALF,CADU,CAQV,KACD,CACD,IAAK,OAAL,CAAc,CACZ,mBACES,CADF,CAEE,SAAAG,CAAO,CAAI,CACTd,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBC,CAApB,CAA6BW,CAA7B,CACZ,CAJH,CAKEZ,CALF,CADY,CAQZ,KACD,CACD,QACEF,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBC,CAApB,CAA6B,IAAK,EAAlC,CADb,CA/BF,CADF,IAqCEH,CAAAA,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBC,CAApB,CAA6B,IAAK,EAAlC,CAEd,CACF","sourcesContent":["import takeEffect from './effects/take'\nimport putEffect from './effects/put'\nimport delayEffect from './effects/delay'\n\nexport default function runReaction(reaction, Reactor, runtime, currentValue) {\n  if (!reaction.isRunning) {\n    reaction.iterator = reaction.generator()\n    reaction.isRunning = true\n  }\n  const nextStep = reaction.iterator.next(currentValue)\n  if (!nextStep.done) {\n    const { value: effect } = nextStep\n    if ('object' === typeof effect && effect.type) {\n      switch (effect.type) {\n        case 'take': {\n          takeEffect(\n            effect,\n            payload => {\n              runReaction(reaction, Reactor, runtime, payload)\n            },\n            Reactor\n          )\n          break\n        }\n        case 'put': {\n          putEffect(\n            effect,\n            payload => {\n              runReaction(reaction, Reactor, runtime, payload)\n            },\n            Reactor\n          )\n          break\n        }\n        case 'delay': {\n          delayEffect(\n            effect,\n            payload => {\n              runReaction(reaction, Reactor, runtime, payload)\n            },\n            Reactor\n          )\n          break\n        }\n        default: {\n          runReaction(reaction, Reactor, runtime, void 0)\n        }\n      }\n    } else {\n      runReaction(reaction, Reactor, runtime, void 0)\n    }\n  }\n}\n"],"file":"runReaction.js"}