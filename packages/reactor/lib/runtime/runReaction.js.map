{"version":3,"sources":["../../src/runtime/runReaction.js"],"names":["runReaction","reaction","Reactor","currentValue","onDone","isRunning","run","nextStep","next","done","value","effect","type","effects","payload"],"mappings":"aAAA,0D,6aAEe,QAASA,CAAAA,WAAT,CAAqBC,CAArB,CAA+BC,CAA/B,CAAwCC,CAAxC,CAAsDC,CAAtD,CAA8D,CACtEH,CAAQ,CAACI,SAD6D,EAEzEJ,CAAQ,CAACK,GAAT,EAFyE,CAI3E,GAAMC,CAAAA,CAAQ,CAAGN,CAAQ,CAACO,IAAT,CAAcL,CAAd,CAAjB,CACA,GAAII,CAAQ,CAACE,IAAb,CACML,CADN,EAEIA,CAAM,CAACG,CAAQ,CAACG,KAAV,CAFV,KAIO,IACUC,CAAAA,CADV,CACqBJ,CADrB,CACGG,KADH,CAED,mBAAoBC,CAApB,GAA8BA,CAAM,CAACC,IAFpC,CAGCC,iBAAQF,CAAM,CAACC,IAAf,CAHD,CAIDC,iBAAQF,CAAM,CAACC,IAAf,EACED,CADF,CAEE,SAAAG,CAAO,CAAI,CACTd,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBY,CAApB,CAA6BV,CAA7B,CACZ,CAJH,CAKEF,CALF,CAJC,CAYDF,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoB,IAAK,EAAzB,CAA4BE,CAA5B,CAZV,CAeHJ,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoB,IAAK,EAAzB,CAA4BE,CAA5B,CAEd,CACF","sourcesContent":["import effects from './effects'\n\nexport default function runReaction(reaction, Reactor, currentValue, onDone) {\n  if (!reaction.isRunning) {\n    reaction.run()\n  }\n  const nextStep = reaction.next(currentValue)\n  if (nextStep.done) {\n    if (onDone) {\n      onDone(nextStep.value)\n    }\n  } else {\n    const { value: effect } = nextStep\n    if ('object' === typeof effect && effect.type) {\n      if (effects[effect.type]) {\n        effects[effect.type](\n          effect,\n          payload => {\n            runReaction(reaction, Reactor, payload, onDone)\n          },\n          Reactor\n        )\n      } else {\n        runReaction(reaction, Reactor, void 0, onDone)\n      }\n    } else {\n      runReaction(reaction, Reactor, void 0, onDone)\n    }\n  }\n}\n"],"file":"runReaction.js"}