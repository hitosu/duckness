{"version":3,"sources":["../../src/runtime/runReaction.js"],"names":["runReaction","reaction","Reactor","currentValue","onDone","isRunning","iterator","generator","nextStep","next","done","value","effect","type","effects","payload"],"mappings":"aAAA,0D,6aAEe,QAASA,CAAAA,WAAT,CAAqBC,CAArB,CAA+BC,CAA/B,CAAwCC,CAAxC,CAAsDC,CAAtD,CAA8D,CACtEH,CAAQ,CAACI,SAD6D,GAEzEJ,CAAQ,CAACK,QAAT,CAAoBL,CAAQ,CAACM,SAAT,EAFqD,CAGzEN,CAAQ,CAACI,SAAT,GAHyE,EAK3E,GAAMG,CAAAA,CAAQ,CAAGP,CAAQ,CAACK,QAAT,CAAkBG,IAAlB,CAAuBN,CAAvB,CAAjB,CACA,GAAIK,CAAQ,CAACE,IAAb,CACMN,CADN,EAEIA,CAAM,CAACI,CAAQ,CAACG,KAAV,CAFV,KAIO,IACUC,CAAAA,CADV,CACqBJ,CADrB,CACGG,KADH,CAED,mBAAoBC,CAApB,GAA8BA,CAAM,CAACC,IAFpC,CAGCC,iBAAQF,CAAM,CAACC,IAAf,CAHD,CAIDC,iBAAQF,CAAM,CAACC,IAAf,EACED,CADF,CAEE,SAAAG,CAAO,CAAI,CACTf,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoBa,CAApB,CAA6BX,CAA7B,CACZ,CAJH,CAKEF,CALF,CAMEF,WANF,CAJC,CAaDA,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoB,IAAK,EAAzB,CAA4BE,CAA5B,CAbV,CAgBHJ,WAAW,CAACC,CAAD,CAAWC,CAAX,CAAoB,IAAK,EAAzB,CAA4BE,CAA5B,CAEd,CACF","sourcesContent":["import effects from './effects'\n\nexport default function runReaction(reaction, Reactor, currentValue, onDone) {\n  if (!reaction.isRunning) {\n    reaction.iterator = reaction.generator()\n    reaction.isRunning = true\n  }\n  const nextStep = reaction.iterator.next(currentValue)\n  if (nextStep.done) {\n    if (onDone) {\n      onDone(nextStep.value)\n    }\n  } else {\n    const { value: effect } = nextStep\n    if ('object' === typeof effect && effect.type) {\n      if (effects[effect.type]) {\n        effects[effect.type](\n          effect,\n          payload => {\n            runReaction(reaction, Reactor, payload, onDone)\n          },\n          Reactor,\n          runReaction\n        )\n      } else {\n        runReaction(reaction, Reactor, void 0, onDone)\n      }\n    } else {\n      runReaction(reaction, Reactor, void 0, onDone)\n    }\n  }\n}\n"],"file":"runReaction.js"}