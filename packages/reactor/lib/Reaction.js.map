{"version":3,"sources":["../src/Reaction.js"],"names":["Reaction","reactionGenerator","name","stop","stopValue","state","isRunning","iterator","return","generator","Object","defineProperty","value","writable","enumerable","next","Error","get"],"mappings":"6FAAe,QAASA,CAAAA,QAAT,CAAkBC,CAAlB,CAAqCC,CAArC,CAA2C,CAUxD,QAASC,CAAAA,CAAT,CAAcC,CAAd,CAAyB,SACnBC,CAAK,CAACC,SADa,GAErBD,CAAK,CAACC,SAAN,GAFqB,CAGjB,MAAQD,CAAK,CAACE,QAHG,GAInBF,CAAK,CAACE,QAAN,CAAeC,MAAf,CAAsBJ,CAAtB,CAJmB,CAKnBC,CAAK,CAACE,QAAN,CAAiB,IALE,KAWxB,CArBuD,GAClDF,CAAAA,CAAK,CAAG,CACZC,SAAS,GADG,CAEZG,SAAS,CAAER,CAFC,CAGZM,QAAQ,CAAE,IAHE,CAIZL,IAAI,CAAJA,CAJY,CAD0C,CAQlDF,CAAQ,CAAG,EARuC,CA0DxD,MAhBAU,CAAAA,MAAM,CAACC,cAAP,CAAsBX,CAAtB,CAAgC,KAAhC,CAAuC,CAAEY,KAAK,CAnB9C,UAAsB,CACfP,CAAK,CAACC,SADS,GAElBD,CAAK,CAACC,SAAN,GAFkB,CAGd,MAAQD,CAAK,CAACE,QAHA,GAIhBJ,CAAI,EAJY,CAKhBE,CAAK,CAACC,SAAN,GALgB,EAOlBD,CAAK,CAACE,QAAN,CAAiBF,CAAK,CAACI,SAAN,OAAAJ,CAAK,WAPJ,CASrB,CAUsC,CAAcQ,QAAQ,GAAtB,CAA+BC,UAAU,GAAzC,CAAvC,CAgBA,CAfAJ,MAAM,CAACC,cAAP,CAAsBX,CAAtB,CAAgC,MAAhC,CAAwC,CAAEY,KAAK,CAAET,CAAT,CAAeU,QAAQ,GAAvB,CAAgCC,UAAU,GAA1C,CAAxC,CAeA,CAdAJ,MAAM,CAACC,cAAP,CAAsBX,CAAtB,CAAgC,MAAhC,CAAwC,CAAEY,KAAK,CAV/C,SAAcA,CAAd,CAAqB,CACnB,GAAIP,CAAK,CAACC,SAAN,EAAmB,MAAQD,CAAK,CAACE,QAArC,CACE,MAAOF,CAAAA,CAAK,CAACE,QAAN,CAAeQ,IAAf,CAAoBH,CAApB,CAAP,CAEA,KAAM,IAAII,CAAAA,KAAJ,wDAAyDd,CAAI,CAAGA,CAAH,CAAU,EAAvE,sBAET,CAIuC,CAAeW,QAAQ,GAAvB,CAAgCC,UAAU,GAA1C,CAAxC,CAcA,CAbAJ,MAAM,CAACC,cAAP,CAAsBX,CAAtB,CAAgC,WAAhC,CAA6C,CAC3CiB,GAD2C,eACrC,CACJ,MAAOZ,CAAAA,CAAK,CAACC,SACd,CAH0C,CAI3CQ,UAAU,GAJiC,CAA7C,CAaA,CAPAJ,MAAM,CAACC,cAAP,CAAsBX,CAAtB,CAAgC,MAAhC,CAAwC,CACtCiB,GADsC,eAChC,CACJ,MAAOZ,CAAAA,CAAK,CAACH,IACd,CAHqC,CAItCY,UAAU,GAJ4B,CAAxC,CAOA,CAAOd,CACR","sourcesContent":["export default function Reaction(reactionGenerator, name) {\n  const state = {\n    isRunning: false,\n    generator: reactionGenerator,\n    iterator: null,\n    name\n  }\n\n  const Reaction = {}\n\n  function stop(stopValue) {\n    if (state.isRunning) {\n      state.isRunning = false\n      if (null != state.iterator) {\n        state.iterator.return(stopValue)\n        state.iterator = null\n      }\n      return true\n    } else {\n      return false\n    }\n  }\n\n  function run(...args) {\n    if (!state.isRunning) {\n      state.isRunning = true\n      if (null != state.iterator) {\n        stop()\n        state.isRunning = true\n      }\n      state.iterator = state.generator(...args)\n    }\n  }\n\n  function next(value) {\n    if (state.isRunning && null != state.iterator) {\n      return state.iterator.next(value)\n    } else {\n      throw new Error(`@duckness/reactor Reaction.next : reaction \"${name ? name : ''}\" is not running`)\n    }\n  }\n\n  Object.defineProperty(Reaction, 'run', { value: run, writable: false, enumerable: true })\n  Object.defineProperty(Reaction, 'stop', { value: stop, writable: false, enumerable: true })\n  Object.defineProperty(Reaction, 'next', { value: next, writable: false, enumerable: true })\n  Object.defineProperty(Reaction, 'isRunning', {\n    get() {\n      return state.isRunning\n    },\n    enumerable: true\n  })\n  Object.defineProperty(Reaction, 'name', {\n    get() {\n      return state.name\n    },\n    enumerable: true\n  })\n\n  return Reaction\n}\n"],"file":"Reaction.js"}