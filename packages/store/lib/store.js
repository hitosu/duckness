"use strict";var _react=require("react");Object.defineProperty(exports,"__esModule",{value:!0}),exports.selectAll=selectAll,exports.always=always,exports.whenChanged=whenChanged,exports.default=createStore;function _slicedToArray(a,b){return _arrayWithHoles(a)||_iterableToArrayLimit(a,b)||_unsupportedIterableToArray(a,b)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function _iterableToArrayLimit(a,b){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a)){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}}function _arrayWithHoles(a){if(Array.isArray(a))return a}function selectAll(a){return a}function always(){return!0}function whenChanged(c,a){return c!==a}function createStore(){function a(a){var b=a(h.current);return i.forEach(function(a){if(!a.shouldSelect||a.shouldSelect(b,h.current)){var c=a.selector?a.selector(b):b;(null==a.shouldUpdate||a.shouldUpdate(c,a.prevValue))&&(a(c),null!=a.shouldUpdate&&(a.prevValue=c))}}),h.current=b,h.current}function b(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},c=b.updateOnMount,d=b.updateOnUnmount,e=b.selector,f=b.shouldSelect,g=b.shouldUpdate,j=void 0===g?whenChanged:g,k=(0,_react.useState)(function(){return e(c?a(c):h.current)}),l=_slicedToArray(k,2),m=l[0],n=l[1];return(0,_react.useEffect)(function(){var b=function(a){n(a)};return b.selector=e,b.shouldSelect=f,b.shouldUpdate=j,i.add(b),function(){d&&a(d),i.delete(b)}},[]),m}var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},d=c.initState,e=void 0===d?{}:d,f=c.actions,g=void 0===f?{}:f,h={current:e},i=new Set,j={};return Object.keys(g).forEach(function(b){j[b]=function(){for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];a(function(a){return g[b].apply(a,d)||a})}}),Object.freeze({useStore:b,Consumer:function(a){var c=b({updateOnMount:a.updateOnMount,updateOnUnmount:a.updateOnUnmount,selector:a.selector,shouldSelect:a.shouldSelect,shouldUpdate:a.shouldUpdate});return a.children(c)},actions:j,updateStore:a,getState:function(a){return a?a(h.current):h.current},subscribe:function(a){return i.add(a),function(){i.delete(a)}},destroy:function(){i.clear()}})}
//# sourceMappingURL=store.js.map