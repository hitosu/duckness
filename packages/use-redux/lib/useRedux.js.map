{"version":3,"sources":["../src/useRedux.js"],"names":["useRedux","store","selector","shouldUpdate","shouldSelect","getState","state","setState","refLastState","current","refLastSelected","refUnsubscribe","subscribe","currentState","selected","dispatch","useDispatch","actionCreator"],"mappings":"aAAA,4B,qwCAEe,QAASA,CAAAA,QAAT,CAAkBC,CAAlB,CAAyBC,CAAzB,CAAmCC,CAAnC,CAAiDC,CAAjD,CAA+D,OAClD,oBAAS,iBAAMF,CAAAA,CAAQ,CAACD,CAAK,CAACI,QAAN,EAAD,CAAd,CAAT,CADkD,uBACrEC,CADqE,MAC9DC,CAD8D,MA4B5E,MAzBA,qBAAU,UAAM,IACRC,CAAAA,CAAY,CAAG,CAAEC,OAAO,CAAEL,CAAY,CAAGE,CAAH,CAAW,IAAlC,CADP,CAERI,CAAe,CAAG,CAAED,OAAO,CAAEN,CAAY,CAAGD,CAAQ,CAACI,CAAD,CAAX,CAAqB,IAA5C,CAFV,CAGRK,CAAc,CAAG,CACrBF,OAAO,CAAER,CAAK,CAACW,SAAN,CAAgB,UAAM,CAC7B,GAAMC,CAAAA,CAAY,CAAGZ,CAAK,CAACI,QAAN,EAArB,CACA,GAAI,CAACD,CAAD,EAAiBA,CAAY,CAACS,CAAD,CAAeL,CAAY,CAACC,OAA5B,CAAjC,CAAuE,CACrE,GAAMK,CAAAA,CAAQ,CAAGZ,CAAQ,CAACW,CAAD,CAAzB,CADqE,CAEjE,CAACV,CAAD,EAAiBA,CAAY,CAACW,CAAD,CAAWJ,CAAe,CAACD,OAA3B,CAFoC,GAGnEF,CAAQ,CAACO,CAAD,CAH2D,CAKjEX,CALiE,GAMnEO,CAAe,CAACD,OAAhB,CAA0BK,CANyC,CAQtE,CACGV,CAXyB,GAY3BI,CAAY,CAACC,OAAb,CAAuBI,CAZI,CAc9B,CAdQ,CADY,CAHT,CAoBd,MAAO,WAAM,CACXF,CAAc,CAACF,OAAf,EACD,CACF,CAvBD,CAuBG,CAACR,CAAD,CAAQC,CAAR,CAAkBC,CAAlB,CAAgCC,CAAhC,CAvBH,CAyBA,CAAO,CAACE,CAAD,CAAQL,CAAK,CAACc,QAAd,CACR,CAEM,QAASC,CAAAA,WAAT,CAAqBf,CAArB,CAA4BgB,CAA5B,CAA2C,CAChD,MAAO,uBAAY,iBAAahB,CAAAA,CAAK,CAACc,QAAN,CAAeE,CAAa,MAAb,kBAAf,CAAb,CAAZ,CAAiE,CAAChB,CAAD,CAAQgB,CAAR,CAAjE,CACR","sourcesContent":["import { useState, useEffect, useCallback } from 'react'\n\nexport default function useRedux(store, selector, shouldUpdate, shouldSelect) {\n  const [state, setState] = useState(() => selector(store.getState()))\n\n  useEffect(() => {\n    const refLastState = { current: shouldSelect ? state : null }\n    const refLastSelected = { current: shouldUpdate ? selector(state) : null }\n    const refUnsubscribe = {\n      current: store.subscribe(() => {\n        const currentState = store.getState()\n        if (!shouldSelect || shouldSelect(currentState, refLastState.current)) {\n          const selected = selector(currentState)\n          if (!shouldUpdate || shouldUpdate(selected, refLastSelected.current)) {\n            setState(selected)\n          }\n          if (shouldUpdate) {\n            refLastSelected.current = selected\n          }\n        }\n        if (shouldSelect) {\n          refLastState.current = currentState\n        }\n      })\n    }\n    return () => {\n      refUnsubscribe.current()\n    }\n  }, [store, selector, shouldUpdate, shouldSelect])\n\n  return [state, store.dispatch]\n}\n\nexport function useDispatch(store, actionCreator) {\n  return useCallback((...args) => store.dispatch(actionCreator(...args)), [store, actionCreator])\n}\n"],"file":"useRedux.js"}